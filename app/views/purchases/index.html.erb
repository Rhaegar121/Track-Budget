<%= render 'shared/header', title: "Purchases", back: categories_path %>

<% if @purchases.empty? %>
    <section>
        <div>
            <span>Delete this category: </span>
            <%= button_to icon('fa-solid fa-trash'), category_path(@category), method: :delete %>
        </div>
        <h2>No purchase found for this category.</h2>
    </section>
<% else %>
    <section>
        <div>
            <span>Delete this category: </span>
            <%= button_to icon('fa-solid fa-trash'), category_path(@category), method: :delete %>
        </div>
        <div>
            <span>Total amount: </span>
            <span><%= number_to_currency(@total) %></span>
        </div>
        <div class="category">
            <span><%= @category.icon %></span>
            <span><%= @category.name %></span>
        </div>
        <ul>
            <% @purchases.each do |purchase| %>
                <li>
                    <span><%= purchase.name %></span>
                    <span><%= number_to_currency(purchase.amount) %></span>
                </li>
            <% end %>
        </ul>
    </section>
<% end %>

<div class="btn">
    <%= link_to "Add Purchase", new_category_purchase_path(@category.id) %>
</div>

